<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fiche Bilan Tennis - Stage Premium</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        @media print {
            body { margin: 0; }
            .no-print { display: none; }
        }
        
        body {
            font-family: 'Inter', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: white;
            color: #2c3e50;
            line-height: 1.5;
            font-size: 13px;
            font-weight: 400;
        }
        
        .main-container {
            max-width: 210mm;
            margin: 0 auto;
            padding: 15mm;
            box-sizing: border-box;
            background: white;
            min-height: 297mm;
        }
        
        /* En-t√™te avec logo et titre */
        .header-section {
            text-align: center;
            margin-bottom: 20mm;
            padding-bottom: 10mm;
            border-bottom: 3px solid #e74c3c;
        }
        
        .logo-container {
            margin-bottom: 15px;
        }
        
        .logo-container img {
            height: 200px;
            width: auto;
        }
        
        .title {
            font-size: 24px;
            font-weight: 700;
            color: #2c3e50;
            margin: 15px 0;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        .subtitle {
            font-size: 14px;
            color: #7f8c8d;
            font-weight: 400;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto;
        }
        
        /* Informations personnelles - Layout en carte */
        .personal-info-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20mm;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            break-inside: avoid;
            page-break-inside: avoid;
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .card-title::before {
            content: "üë§";
            font-size: 18px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .form-field {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .form-field label {
            font-weight: 500;
            color: #495057;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .form-field input[type="text"], 
        .form-field input[type="number"],
        .form-field input[type="date"] {
            border: 2px solid #dee2e6;
            border-radius: 6px;
            padding: 8px 12px;
            background: white;
            font-size: 13px;
            transition: border-color 0.3s ease;
        }
        
        .form-field input:focus {
            outline: none;
            border-color: #e74c3c;
            box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.1);
        }
        
        .gender-section {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .gender-option {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 13px;
        }
        
        /* Statistiques - Tableau moderne */
        .stats-section {
            margin-bottom: 20mm;
            break-inside: avoid;
            page-break-inside: avoid;
        }
        
        .section-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .stats-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        
        .stats-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .stats-table th {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            padding: 15px;
            font-weight: 600;
            font-size: 13px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stats-table td {
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .stats-table input {
            border: none;
            background: transparent;
            text-align: center;
            font-size: 14px;
            font-weight: 600;
            color: #2c3e50;
            width: 100%;
        }
        
        .stats-table input:focus {
            outline: 2px solid #e74c3c;
            border-radius: 4px;
        }
        
        /* L√©gende des couleurs - Design moderne */
        .legend-card {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
            color: white;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            margin: 15mm 0;
            font-size: 13px;
            font-weight: 500;
            break-inside: avoid;
            page-break-inside: avoid;
        }
        
        .legend-items {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 8px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        /* Sections d'√©valuation - Design √©pur√© */
        .evaluation-section {
            margin-bottom: 15mm;
            break-inside: avoid;
            page-break-inside: avoid;
        }
        
        .evaluation-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.06);
            border: 1px solid #ecf0f1;
        }
        
        .evaluation-header {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 15px 20px;
            border-bottom: 2px solid #dee2e6;
        }
        
        .evaluation-title {
            font-size: 15px;
            font-weight: 600;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .evaluation-body {
            padding: 0;
        }
        
        .evaluation-row {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid #f8f9fa;
            transition: background-color 0.2s ease;
        }
        
        .evaluation-row:last-child {
            border-bottom: none;
        }
        
        .evaluation-row:hover {
            background: #f8f9fa;
        }
        
        .evaluation-criterion {
            flex: 1;
            font-size: 13px;
            font-weight: 500;
            color: #495057;
        }
        
        .color-options {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .color-radio {
            position: relative;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .color-radio:hover {
            transform: scale(1.1);
        }
        
        .color-radio input[type="radio"] {
            display: none;
        }
        
        .color-circle {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 3px solid #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15), inset 0 1px 3px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .color-radio input[type="radio"]:checked + .color-circle::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 14px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }
        
        .red { background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); }
        .orange { background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%); }
        .green { background: linear-gradient(135deg, #27ae60 0%, #229954 100%); }
        .blue { background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); }
        
        /* Zone de commentaires - Design moderne */
        .comments-section {
            margin-top: 15px;
        }
        
        .comment-field {
            margin-bottom: 15px;
        }
        
        .comment-field label {
            display: block;
            font-weight: 500;
            color: #495057;
            margin-bottom: 8px;
            font-size: 13px;
        }
        
        .comment-field textarea {
            width: 100%;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 12px;
            font-family: 'Inter', Arial, sans-serif;
            font-size: 13px;
            line-height: 1.5;
            resize: vertical;
            transition: border-color 0.3s ease;
            background: #fafbfc;
        }
        
        .comment-field textarea:focus {
            outline: none;
            border-color: #e74c3c;
            background: white;
            box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.1);
        }
        
        .comment-field.small textarea { min-height: 80px; }
        .comment-field.medium textarea { min-height: 100px; }
        .comment-field.large textarea { min-height: 120px; }
        
        /* Bilan g√©n√©ral - Mise en valeur */
        .final-section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            padding: 20px;
            margin: 20mm 0;
            border-left: 5px solid #e74c3c;
            break-inside: avoid;
            page-break-inside: avoid;
        }
        
        .final-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .final-title::before {
            content: "üìã";
            font-size: 20px;
        }
        
        /* Footer professionnel */
        .footer-section {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-top: 20mm;
            padding-top: 15px;
            border-top: 2px solid #dee2e6;
            break-inside: avoid;
            page-break-inside: avoid;
        }
        
        .footer-field {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .footer-field label {
            font-weight: 600;
            color: #2c3e50;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .footer-field input {
            border: 2px solid #dee2e6;
            border-radius: 6px;
            padding: 10px 12px;
            font-size: 13px;
            font-weight: 500;
        }
        
        /* Bouton de t√©l√©chargement */
        .download-btn {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(231, 76, 60, 0.6);
        }
        
        .download-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .main-container {
                padding: 10px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .footer-section {
                grid-template-columns: 1fr;
            }
            
            .legend-items {
                gap: 10px;
            }
        }
        
        /* Print optimizations */
        @media print {
            .main-container {
                max-width: none;
                margin: 0;
                padding: 10mm;
            }
            
            .evaluation-section {
                break-inside: avoid;
                page-break-inside: avoid;
            }
            
            .download-btn {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="no-print">
        <button class="download-btn" onclick="generatePDF()">üìÑ T√©l√©charger le PDF</button>
    </div>

    <div class="main-container">
        <!-- En-t√™te -->
        <div class="header-section">
            <div class="logo-container">
                <img src="https://ikhlefmour.github.io/fiche-bilan-tennis/logo.png" alt="Logo">
            </div>
            <h1 class="title">Bilan Individuel - Stage Sables d'Olonne 2025</h1>
            <p class="subtitle">
                Ce document est un bilan personnalis√© pour aider le joueur √† progresser √† la suite du stage Coaching Spirit x HRT. 
                Il sera transmis √† la famille et au coach r√©f√©rent pour poursuivre un travail cibl√©.
            </p>
        </div>

        <!-- Informations personnelles -->
        <div class="personal-info-card">
            <div class="card-title">Informations personnelles</div>
            <div class="form-grid">
                <div class="form-field">
                    <label for="nom">Nom</label>
                    <input type="text" id="nom" name="nom" placeholder="Nom de famille">
                </div>
                <div class="form-field">
                    <label for="prenom">Pr√©nom</label>
                    <input type="text" id="prenom" name="prenom" placeholder="Pr√©nom">
                </div>
                <div class="form-field">
                    <label for="annee_naissance">Ann√©e de naissance</label>
                    <input type="text" id="annee_naissance" name="annee_naissance" placeholder="2010">
                </div>
                <div class="form-field">
                    <label for="classement">Classement</label>
                    <input type="text" id="classement" name="classement" placeholder="15/5">
                </div>
            </div>
            <div class="form-field">
                <label>Genre</label>
                <div class="gender-section">
                    <div class="gender-option">
                        <input type="radio" id="masculin" name="sexe" value="M">
                        <label for="masculin">Masculin</label>
                    </div>
                    <div class="gender-option">
                        <input type="radio" id="feminin" name="sexe" value="F">
                        <label for="feminin">F√©minin</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistiques -->
        <div class="stats-section">
            <div class="section-header">
                üìä Statistiques du stage
            </div>
            <div class="stats-card">
                <table class="stats-table">
                    <thead>
                        <tr>
                            <th>Matchs jou√©s</th>
                            <th>Victoires</th>
                            <th>D√©faites</th>
                            <th>% de victoires</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="number" id="matchs_joues" name="matchs_joues" placeholder="0" min="0"></td>
                            <td><input type="number" id="victoires" name="victoires" placeholder="0" min="0"></td>
                            <td><input type="text" id="defaites" name="defaites" placeholder="0" readonly></td>
                            <td><input type="text" id="pourcentage" name="pourcentage" placeholder="0%" readonly></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- L√©gende -->
        <div class="legend-card">
            <div><strong>L√©gende des √©valuations</strong></div>
            <div class="legend-items">
                <div class="legend-item">
                    <div class="legend-dot red"></div>
                    <span>Insuffisant</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot orange"></div>
                    <span>Moyen</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot green"></div>
                    <span>Bien</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot blue"></div>
                    <span>Excellent</span>
                </div>
            </div>
        </div>

        <!-- √âvaluations techniques -->
        
        <!-- Bloc Frappe -->
        <div class="evaluation-section">
            <div class="evaluation-card">
                <div class="evaluation-header">
                    <div class="evaluation-title">üéæ Qualit√© de frappe</div>
                </div>
                <div class="evaluation-body">
                    <div class="evaluation-row">
                        <div class="evaluation-criterion">Qualit√© de frappe dans l'√©change</div>
                        <div class="color-options">
                            <label class="color-radio">
                                <input type="radio" name="frappe_echange" value="red">
                                <div class="color-circle red"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="frappe_echange" value="orange">
                                <div class="color-circle orange"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="frappe_echange" value="green">
                                <div class="color-circle green"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="frappe_echange" value="blue">
                                <div class="color-circle blue"></div>
                            </label>
                        </div>
                    </div>
                    <div class="evaluation-row">
                        <div class="evaluation-criterion">Qualit√© de frappe pour faire la diff√©rence</div>
                        <div class="color-options">
                            <label class="color-radio">
                                <input type="radio" name="frappe_difference" value="red">
                                <div class="color-circle red"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="frappe_difference" value="orange">
                                <div class="color-circle orange"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="frappe_difference" value="green">
                                <div class="color-circle green"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="frappe_difference" value="blue">
                                <div class="color-circle blue"></div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="comments-section">
                <div class="comment-field small">
                    <label for="qualites_frappe">Commentaires sur les qualit√©s de frappe</label>
                    <textarea id="qualites_frappe" name="qualites_frappe" placeholder="D√©taillez les points forts et axes d'am√©lioration concernant la frappe..."></textarea>
                </div>
            </div>
        </div>

        <!-- Bloc Service -->
        <div class="evaluation-section">
            <div class="evaluation-card">
                <div class="evaluation-header">
                    <div class="evaluation-title">üéØ Service</div>
                </div>
                <div class="evaluation-body">
                    <div class="evaluation-row">
                        <div class="evaluation-criterion">Qualit√© 1√®re balle</div>
                        <div class="color-options">
                            <label class="color-radio">
                                <input type="radio" name="service_1" value="red">
                                <div class="color-circle red"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="service_1" value="orange">
                                <div class="color-circle orange"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="service_1" value="green">
                                <div class="color-circle green"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="service_1" value="blue">
                                <div class="color-circle blue"></div>
                            </label>
                        </div>
                    </div>
                    <div class="evaluation-row">
                        <div class="evaluation-criterion">Qualit√© 2√®me balle</div>
                        <div class="color-options">
                            <label class="color-radio">
                                <input type="radio" name="service_2" value="red">
                                <div class="color-circle red"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="service_2" value="orange">
                                <div class="color-circle orange"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="service_2" value="green">
                                <div class="color-circle green"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="service_2" value="blue">
                                <div class="color-circle blue"></div>
                            </label>
                        </div>
                    </div>
                    <div class="evaluation-row">
                        <div class="evaluation-criterion">Variations</div>
                        <div class="color-options">
                            <label class="color-radio">
                                <input type="radio" name="variations" value="red">
                                <div class="color-circle red"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="variations" value="orange">
                                <div class="color-circle orange"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="variations" value="green">
                                <div class="color-circle green"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="variations" value="blue">
                                <div class="color-circle blue"></div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="comments-section">
                <div class="comment-field small">
                    <label for="qualites_service">Commentaires sur le service</label>
                    <textarea id="qualites_service" name="qualites_service" placeholder="Analysez la technique, la puissance, la pr√©cision et les variations du service..."></textarea>
                </div>
            </div>
        </div>

        <!-- Bloc Sens du jeu -->
        <div class="evaluation-section">
            <div class="evaluation-card">
                <div class="evaluation-header">
                    <div class="evaluation-title">üß† Sens du jeu</div>
                </div>
                <div class="evaluation-body">
                    <div class="evaluation-row">
                        <div class="evaluation-criterion">Occupation du terrain</div>
                        <div class="color-options">
                            <label class="color-radio">
                                <input type="radio" name="occupation" value="red">
                                <div class="color-circle red"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="occupation" value="orange">
                                <div class="color-circle orange"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="occupation" value="green">
                                <div class="color-circle green"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="occupation" value="blue">
                                <div class="color-circle blue"></div>
                            </label>
                        </div>
                    </div>
                    <div class="evaluation-row">
                        <div class="evaluation-criterion">Sens tactique</div>
                        <div class="color-options">
                            <label class="color-radio">
                                <input type="radio" name="tactique" value="red">
                                <div class="color-circle red"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="tactique" value="orange">
                                <div class="color-circle orange"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="tactique" value="green">
                                <div class="color-circle green"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="tactique" value="blue">
                                <div class="color-circle blue"></div>
                            </label>
                        </div>
                    </div>
                    <div class="evaluation-row">
                        <div class="evaluation-criterion">Sens de l'anticipation</div>
                        <div class="color-options">
                            <label class="color-radio">
                                <input type="radio" name="anticipation" value="red">
                                <div class="color-circle red"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="anticipation" value="orange">
                                <div class="color-circle orange"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="anticipation" value="green">
                                <div class="color-circle green"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="anticipation" value="blue">
                                <div class="color-circle blue"></div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="comments-section">
                <div class="comment-field small">
                    <label for="qualites_sens_jeu">Commentaires sur le sens du jeu</label>
                    <textarea id="qualites_sens_jeu" name="qualites_sens_jeu" placeholder="√âvaluez le positionnement, la lecture du jeu et les choix tactiques..."></textarea>
                </div>
            </div>
        </div>

        <!-- Bloc Physique -->
        <div class="evaluation-section">
            <div class="evaluation-card">
                <div class="evaluation-header">
                    <div class="evaluation-title">üí™ Qualit√©s physiques</div>
                </div>
                <div class="evaluation-body">
                    <div class="evaluation-row">
                        <div class="evaluation-criterion">D√©placements</div>
                        <div class="color-options">
                            <label class="color-radio">
                                <input type="radio" name="deplacement" value="red">
                                <div class="color-circle red"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="deplacement" value="orange">
                                <div class="color-circle orange"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="deplacement" value="green">
                                <div class="color-circle green"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="deplacement" value="blue">
                                <div class="color-circle blue"></div>
                            </label>
                        </div>
                    </div>
                    <div class="evaluation-row">
                        <div class="evaluation-criterion">Coordination</div>
                        <div class="color-options">
                            <label class="color-radio">
                                <input type="radio" name="coordination" value="red">
                                <div class="color-circle red"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="coordination" value="orange">
                                <div class="color-circle orange"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="coordination" value="green">
                                <div class="color-circle green"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="coordination" value="blue">
                                <div class="color-circle blue"></div>
                            </label>
                        </div>
                    </div>
                    <div class="evaluation-row">
                        <div class="evaluation-criterion">Go√ªt de l'effort</div>
                        <div class="color-options">
                            <label class="color-radio">
                                <input type="radio" name="effort" value="red">
                                <div class="color-circle red"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="effort" value="orange">
                                <div class="color-circle orange"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="effort" value="green">
                                <div class="color-circle green"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="effort" value="blue">
                                <div class="color-circle blue"></div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="comments-section">
                <div class="comment-field small">
                    <label for="qualites_physique">Commentaires sur les qualit√©s physiques</label>
                    <textarea id="qualites_physique" name="qualites_physique" placeholder="Analysez la vitesse, l'endurance, la force et la condition physique g√©n√©rale..."></textarea>
                </div>
            </div>
        </div>

        <!-- Bloc Vie de groupe -->
        <div class="evaluation-section">
            <div class="evaluation-card">
                <div class="evaluation-header">
                    <div class="evaluation-title">üë• Vie de groupe</div>
                </div>
                <div class="evaluation-body">
                    <div class="evaluation-row">
                        <div class="evaluation-criterion">Autonomie</div>
                        <div class="color-options">
                            <label class="color-radio">
                                <input type="radio" name="autonomie" value="red">
                                <div class="color-circle red"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="autonomie" value="orange">
                                <div class="color-circle orange"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="autonomie" value="green">
                                <div class="color-circle green"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="autonomie" value="blue">
                                <div class="color-circle blue"></div>
                            </label>
                        </div>
                    </div>
                    <div class="evaluation-row">
                        <div class="evaluation-criterion">Respect du cadre</div>
                        <div class="color-options">
                            <label class="color-radio">
                                <input type="radio" name="respect_cadre" value="red">
                                <div class="color-circle red"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="respect_cadre" value="orange">
                                <div class="color-circle orange"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="respect_cadre" value="green">
                                <div class="color-circle green"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="respect_cadre" value="blue">
                                <div class="color-circle blue"></div>
                            </label>
                        </div>
                    </div>
                    <div class="evaluation-row">
                        <div class="evaluation-criterion">Relations aux autres</div>
                        <div class="color-options">
                            <label class="color-radio">
                                <input type="radio" name="relations_autres" value="red">
                                <div class="color-circle red"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="relations_autres" value="orange">
                                <div class="color-circle orange"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="relations_autres" value="green">
                                <div class="color-circle green"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="relations_autres" value="blue">
                                <div class="color-circle blue"></div>
                            </label>
                        </div>
                    </div>
                    <div class="evaluation-row">
                        <div class="evaluation-criterion">Esprit de groupe</div>
                        <div class="color-options">
                            <label class="color-radio">
                                <input type="radio" name="esprit_groupe" value="red">
                                <div class="color-circle red"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="esprit_groupe" value="orange">
                                <div class="color-circle orange"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="esprit_groupe" value="green">
                                <div class="color-circle green"></div>
                            </label>
                            <label class="color-radio">
                                <input type="radio" name="esprit_groupe" value="blue">
                                <div class="color-circle blue"></div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="comments-section">
                <div class="comment-field small">
                    <label for="qualites_groupe">Commentaires sur la vie de groupe</label>
                    <textarea id="qualites_groupe" name="qualites_groupe" placeholder="√âvaluez l'attitude, la coop√©ration et l'int√©gration dans l'√©quipe..."></textarea>
                </div>
            </div>
        </div>

        <!-- Bilan g√©n√©ral -->
        <div class="final-section">
            <div class="final-title">Bilan g√©n√©ral et recommandations</div>
            <div class="comment-field large">
                <label for="bilan_general">Synth√®se et axes de progression</label>
                <textarea id="bilan_general" name="bilan_general" placeholder="R√©digez une synth√®se compl√®te incluant les points forts du joueur, les axes d'am√©lioration prioritaires et les recommandations pour la suite de sa progression..."></textarea>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer-section">
            <div class="footer-field">
                <label for="coach_referent">√âvaluation r√©alis√©e par</label>
                <input type="text" id="coach_referent" name="coach_referent" placeholder="Nom du coach √©valuateur">
            </div>
            <div class="footer-field">
                <label for="date">Date d'√©valuation</label>
                <input type="date" id="date" name="date">
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            // Date par d√©faut
            document.getElementById('date').value = new Date().toISOString().split('T')[0];
            
            // Animation des radio buttons
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const circle = this.nextElementSibling;
                    circle.style.transform = 'scale(1.2)';
                    setTimeout(() => {
                        circle.style.transform = 'scale(1)';
                    }, 200);
                });
            });
        });

        // Calcul automatique des statistiques
        function calculateStats() {
            const victoires = parseInt(document.getElementById('victoires').value) || 0;
            const matchs = parseInt(document.getElementById('matchs_joues').value) || 0;
            
            if (matchs > 0) {
                const defaites = Math.max(0, matchs - victoires);
                const percentage = Math.round((victoires / matchs) * 100);
                document.getElementById('defaites').value = defaites;
                document.getElementById('pourcentage').value = percentage + '%';
            } else {
                document.getElementById('defaites').value = '';
                document.getElementById('pourcentage').value = '';
            }
        }

        // Validation des victoires
        function validateVictoires() {
            const victoires = parseInt(document.getElementById('victoires').value) || 0;
            const matchs = parseInt(document.getElementById('matchs_joues').value) || 0;
            
            if (victoires > matchs && matchs > 0) {
                alert('Le nombre de victoires ne peut pas √™tre sup√©rieur au nombre de matchs jou√©s.');
                document.getElementById('victoires').value = matchs;
                calculateStats();
            }
        }

        // Event listeners pour les statistiques
        document.getElementById('victoires').addEventListener('input', function() {
            calculateStats();
            validateVictoires();
        });
        
        document.getElementById('matchs_joues').addEventListener('input', calculateStats);

        // Fonction de g√©n√©ration PDF avec gestion intelligente des pages
        async function generatePDF() {
            try {
                // V√©rification des biblioth√®ques
                if (typeof window.jspdf === 'undefined' || typeof html2canvas === 'undefined') {
                    alert('Erreur: Les biblioth√®ques PDF ne sont pas charg√©es. Veuillez rafra√Æchir la page.');
                    return;
                }

                const { jsPDF } = window.jspdf;
                const btn = document.querySelector('.download-btn');
                const originalText = btn.innerHTML;
                
                // Interface de chargement
                btn.innerHTML = '‚è≥ G√©n√©ration en cours...';
                btn.disabled = true;
                document.querySelector('.no-print').style.display = 'none';
                
                // Pr√©paration : capturer le container principal
                const mainContainer = document.querySelector('.main-container');
                window.scrollTo(0, 0);
                
                // Sauvegarder les styles originaux
                const originalBodyStyle = {
                    height: document.body.style.height,
                    overflow: document.body.style.overflow
                };
                
                // Forcer l'affichage complet
                document.body.style.height = 'auto';
                document.body.style.overflow = 'visible';
                mainContainer.style.height = 'auto';
                mainContainer.style.minHeight = 'auto';
                
                // Remplacement des textareas et inputs date par des divs pour une meilleure capture
                const textareas = document.querySelectorAll('textarea');
                const dateInputs = document.querySelectorAll('input[type="date"]');
                const originalElements = [];
                
                // Traitement des textareas
                textareas.forEach((textarea, index) => {
                    originalElements[index] = {
                        element: textarea,
                        parent: textarea.parentNode,
                        nextSibling: textarea.nextSibling
                    };
                    
                    const div = document.createElement('div');
                    
                    // Copie des styles essentiels avec calcul automatique de la hauteur
                    div.style.width = '100%';
                    div.style.padding = '12px';
                    div.style.border = '2px solid #dee2e6';
                    div.style.borderRadius = '8px';
                    div.style.backgroundColor = '#fafbfc';
                    div.style.fontFamily = "'Inter', Arial, sans-serif";
                    div.style.fontSize = '13px';
                    div.style.lineHeight = '1.5';
                    div.style.whiteSpace = 'pre-wrap';
                    div.style.wordWrap = 'break-word';
                    div.style.overflow = 'visible';
                    div.style.boxSizing = 'border-box';
                    div.style.minHeight = 'auto';
                    
                    // Contenu avec gestion des lignes vides
                    const content = textarea.value || '';
                    div.textContent = content;
                    
                    // Ajuster la hauteur en fonction du contenu
                    if (content.length > 0) {
                        const lines = content.split('\n').length;
                        const minHeight = Math.max(80, lines * 20 + 24); // 20px par ligne + padding
                        div.style.minHeight = minHeight + 'px';
                    } else {
                        div.style.minHeight = '80px';
                    }
                    
                    // Remplacement
                    textarea.parentNode.replaceChild(div, textarea);
                });
                
                // CORRECTION MAJEURE DU BUG DE LA DATE - Traitement des inputs date
                dateInputs.forEach((dateInput, index) => {
                    const textareaIndex = textareas.length + index;
                    originalElements[textareaIndex] = {
                        element: dateInput,
                        parent: dateInput.parentNode,
                        nextSibling: dateInput.nextSibling
                    };
                    
                    const div = document.createElement('div');
                    div.className = 'date-replacement-div'; // Classe pour identification
                    
                    // Copie des styles du champ date
                    div.style.border = '2px solid #dee2e6';
                    div.style.borderRadius = '6px';
                    div.style.padding = '10px 12px';
                    div.style.fontSize = '13px';
                    div.style.fontWeight = '500';
                    div.style.backgroundColor = 'white';
                    div.style.fontFamily = "'Inter', Arial, sans-serif";
                    div.style.color = '#2c3e50';
                    div.style.minHeight = '20px';
                    div.style.display = 'flex';
                    div.style.alignItems = 'center';
                    div.style.boxSizing = 'border-box';
                    
                    // ‚úÖ SOLUTION ROBUSTE POUR LE FORMATAGE DE LA DATE
                    const dateValue = dateInput.value;
                    console.log('Processing date input, value:', dateValue);
                    
                    if (dateValue && dateValue.trim() !== '') {
                        try {
                            // Parsing manuel s√©curis√©
                            const parts = dateValue.split('-');
                            if (parts.length === 3) {
                                const year = parseInt(parts[0]);
                                const month = parseInt(parts[1]);
                                const day = parseInt(parts[2]);
                                
                                // V√©rification de validit√©
                                if (!isNaN(year) && !isNaN(month) && !isNaN(day) && 
                                    year > 1900 && month >= 1 && month <= 12 && day >= 1 && day <= 31) {
                                    
                                    // Format fran√ßais direct
                                    const formattedDate = `${day.toString().padStart(2, '0')}/${month.toString().padStart(2, '0')}/${year}`;
                                    div.textContent = formattedDate;
                                    console.log('Date formatted successfully:', formattedDate);
                                } else {
                                    throw new Error('Invalid date components');
                                }
                            } else {
                                throw new Error('Invalid date format');
                            }
                        } catch (error) {
                            console.warn('Date formatting error:', error);
                            div.textContent = dateValue; // Fallback
                        }
                    } else {
                        div.textContent = '';
                        div.style.color = '#999';
                        div.style.fontStyle = 'italic';
                    }
                    
                    // Remplacement avec v√©rification
                    if (dateInput.parentNode) {
                        dateInput.parentNode.replaceChild(div, dateInput);
                        console.log('Date input replaced successfully');
                    }
                });
                
                // Attendre que le DOM se stabilise compl√®tement
                await new Promise(resolve => setTimeout(resolve, 500));
                
                // V√©rification finale des √©l√©ments remplac√©s
                console.log('Date divs in DOM:', document.querySelectorAll('.date-replacement-div').length);
                
                // **SOLUTION INTELLIGENTE : D√©coupage par sections**
                const sections = [
                    { element: document.querySelector('.header-section'), name: 'header' },
                    { element: document.querySelector('.personal-info-card'), name: 'personal-info' },
                    { element: document.querySelector('.stats-section'), name: 'stats' },
                    { element: document.querySelector('.legend-card'), name: 'legend' },
                    ...Array.from(document.querySelectorAll('.evaluation-section')).map((el, i) => ({ element: el, name: `evaluation-${i}` })),
                    { 
                        element: document.querySelector('.final-section'), 
                        name: 'final',
                        combineWithNext: true // Indicateur pour combiner avec le footer
                    },
                    { element: document.querySelector('.footer-section'), name: 'footer' }
                ].filter(section => section.element !== null);

                const pdf = new jsPDF('p', 'mm', 'a4');
                const pdfWidth = 210; // A4 width
                const pdfHeight = 297; // A4 height
                const margin = 10;
                const availableHeight = pdfHeight - (margin * 2);
                let currentPageY = margin;
                let isFirstElement = true;
                let pageCount = 1; // Compteur de pages

                for (let i = 0; i < sections.length; i++) {
                    const section = sections[i];
                    console.log('Processing section:', section.name); // Debug
                    
                    // V√©rifier si on doit combiner avec la section suivante (final + footer)
                    if (section.combineWithNext && i + 1 < sections.length) {
                        const nextSection = sections[i + 1];
                        
                        // Cr√©er un conteneur temporaire pour combiner final-section et footer
                        const combinedContainer = document.createElement('div');
                        combinedContainer.style.background = 'white';
                        combinedContainer.style.padding = '0';
                        combinedContainer.style.fontFamily = "'Inter', Arial, sans-serif";
                        combinedContainer.style.fontSize = '13px';
                        combinedContainer.style.lineHeight = '1.5';
                        combinedContainer.style.color = '#2c3e50';
                        
                        // Cloner les deux sections avec pr√©servation compl√®te des styles
                        const finalClone = section.element.cloneNode(true);
                        const footerClone = nextSection.element.cloneNode(true);
                        
                        // Forcer les styles de base sur les clones pour assurer la coh√©rence
                        finalClone.style.fontFamily = "'Inter', Arial, sans-serif";
                        finalClone.style.fontSize = '13px';
                        finalClone.style.lineHeight = '1.5';
                        finalClone.style.color = '#2c3e50';
                        finalClone.style.marginBottom = '15mm';
                        
                        footerClone.style.fontFamily = "'Inter', Arial, sans-serif";
                        footerClone.style.fontSize = '13px';
                        footerClone.style.lineHeight = '1.5';
                        footerClone.style.color = '#2c3e50';
                        
                        // Appliquer les styles aux √©l√©ments enfants du footer pour assurer la coh√©rence
                        const footerLabels = footerClone.querySelectorAll('label');
                        footerLabels.forEach(label => {
                            label.style.fontFamily = "'Inter', Arial, sans-serif";
                            label.style.fontSize = '13px';
                            label.style.fontWeight = '600';
                            label.style.color = '#2c3e50';
                        });
                        
                        const footerInputs = footerClone.querySelectorAll('input');
                        footerInputs.forEach(input => {
                            input.style.fontFamily = "'Inter', Arial, sans-serif";
                            input.style.fontSize = '13px';
                            input.style.fontWeight = '500';
                        });
                        
                        combinedContainer.appendChild(finalClone);
                        combinedContainer.appendChild(footerClone);
                        
                        // Ajouter temporairement au DOM (invisible)
                        combinedContainer.style.position = 'absolute';
                        combinedContainer.style.left = '-9999px';
                        combinedContainer.style.top = '0';
                        combinedContainer.style.width = mainContainer.offsetWidth + 'px';
                        document.body.appendChild(combinedContainer);
                        
                        // Attendre que les styles se propagent
                        await new Promise(resolve => setTimeout(resolve, 100));
                        
                        // Capturer la section combin√©e avec les m√™mes param√®tres que les autres sections
                        const combinedCanvas = await html2canvas(combinedContainer, {
                            scale: 1.2,
                            useCORS: true,
                            backgroundColor: '#ffffff',
                            allowTaint: false,
                            scrollX: 0,
                            scrollY: 0,
                            width: combinedContainer.scrollWidth,
                            height: combinedContainer.scrollHeight,
                            windowWidth: combinedContainer.scrollWidth,
                            windowHeight: combinedContainer.scrollHeight,
                            onclone: function(clonedDoc) {
                                // Appliquer les styles de base au document clon√©
                                const clonedBody = clonedDoc.body;
                                clonedBody.style.fontFamily = "'Inter', Arial, sans-serif";
                                clonedBody.style.fontSize = '13px';
                                clonedBody.style.lineHeight = '1.5';
                                clonedBody.style.color = '#2c3e50';
                                
                                // Forcer les styles sur tous les √©l√©ments du clone
                                const allElements = clonedDoc.querySelectorAll('*');
                                allElements.forEach(el => {
                                    if (!el.style.fontFamily || el.style.fontFamily === '') {
                                        el.style.fontFamily = "'Inter', Arial, sans-serif";
                                    }
                                    if (!el.style.fontSize || el.style.fontSize === '') {
                                        el.style.fontSize = '13px';
                                    }
                                });
                            }
                        });
                        
                        // Nettoyer le DOM
                        document.body.removeChild(combinedContainer);
                        
                        const combinedImgData = combinedCanvas.toDataURL('image/png', 0.95);
                        const combinedWidth = pdfWidth - (margin * 2);
                        const combinedHeight = (combinedCanvas.height * combinedWidth) / combinedCanvas.width;
                        
                        // V√©rifier si la section combin√©e tient sur la page courante
                        if (!isFirstElement && (currentPageY + combinedHeight) > (pdfHeight - margin - 15)) {
                            pdf.addPage();
                            pageCount++;
                            currentPageY = margin;
                        }
                        
                        // Ajouter la section combin√©e au PDF
                        pdf.addImage(combinedImgData, 'PNG', margin, currentPageY, combinedWidth, combinedHeight);
                        currentPageY += combinedHeight + 5;
                        isFirstElement = false;
                        
                        // Passer la section suivante (footer) car elle a d√©j√† √©t√© trait√©e
                        i++;
                        continue;
                    }
                    
                    // Capturer chaque section individuellement (comportement normal)
                    const sectionCanvas = await html2canvas(section.element, {
                        scale: 1.2,
                        useCORS: true,
                        backgroundColor: '#ffffff',
                        allowTaint: false,
                        scrollX: 0,
                        scrollY: 0,
                        width: section.element.scrollWidth,
                        height: section.element.scrollHeight,
                        windowWidth: section.element.scrollWidth,
                        windowHeight: section.element.scrollHeight,
                        onclone: function(clonedDoc) {
                            const clonedSection = clonedDoc.querySelector(`.${section.element.className.split(' ')[0]}`);
                            if (clonedSection) {
                                clonedSection.style.height = 'auto';
                                clonedSection.style.overflow = 'visible';
                            }
                        }
                    });

                    const sectionImgData = sectionCanvas.toDataURL('image/png', 0.95);
                    const sectionWidth = pdfWidth - (margin * 2);
                    const sectionHeight = (sectionCanvas.height * sectionWidth) / sectionCanvas.width;

                    // V√©rifier si la section tient sur la page courante
                    if (!isFirstElement && (currentPageY + sectionHeight) > (pdfHeight - margin - 15)) { // 15mm pour le pied de page
                        // Nouvelle page n√©cessaire
                        pdf.addPage();
                        pageCount++;
                        currentPageY = margin;
                    }

                    // Ajouter la section au PDF
                    pdf.addImage(sectionImgData, 'PNG', margin, currentPageY, sectionWidth, sectionHeight);
                    currentPageY += sectionHeight + 5; // 5mm d'espacement entre sections
                    isFirstElement = false;
                }
                
                // ‚úÖ AJOUT DE LA NUM√âROTATION DES PAGES
                const totalPages = pageCount;
                for (let i = 1; i <= totalPages; i++) {
                    pdf.setPage(i);
                    
                    // Style du pied de page
                    pdf.setFontSize(10);
                    pdf.setTextColor(128, 128, 128); // Gris
                    
                    // Texte centr√© en bas de page
                    const pageText = `Page ${i} sur ${totalPages}`;
                    const textWidth = pdf.getTextWidth(pageText);
                    const x = (pdfWidth - textWidth) / 2; // Centr√©
                    const y = pdfHeight - 5; // 5mm du bas
                    
                    pdf.text(pageText, x, y);
                }
                
                // Restauration des √©l√©ments originaux
                originalElements.forEach((original, index) => {
                    console.log('Restoring element:', index); // Debug
                    if (original && original.element && original.parent) {
                        try {
                            if (original.nextSibling) {
                                original.parent.insertBefore(original.element, original.nextSibling);
                            } else {
                                original.parent.appendChild(original.element);
                            }
                        } catch (e) {
                            console.error('Error restoring element:', e);
                        }
                    }
                });
                
                // Restauration des styles
                document.body.style.height = originalBodyStyle.height;
                document.body.style.overflow = originalBodyStyle.overflow;
                
                // Nettoyage am√©lior√© - IMPORTANT : ne pas supprimer les divs de date
                document.querySelectorAll('div').forEach(div => {
                    // Supprimer uniquement les divs de textarea, PAS les divs de date
                    if (div.style.whiteSpace === 'pre-wrap' && 
                        div.tagName === 'DIV' && 
                        !div.classList.contains('date-replacement-div')) {
                        const parent = div.parentNode;
                        if (parent && !parent.querySelector('textarea')) {
                            try {
                                parent.removeChild(div);
                            } catch (e) {
                                // Ignorer les erreurs
                            }
                        }
                    }
                });
                
                // Restauration de l'interface
                document.querySelector('.no-print').style.display = 'block';
                btn.innerHTML = originalText;
                btn.disabled = false;

                // G√©n√©ration du nom de fichier
                const prenom = (document.getElementById('prenom').value || 'Prenom').trim().replace(/[^a-zA-Z0-9]/g, '_');
                const nom = (document.getElementById('nom').value || 'Nom').trim().replace(/[^a-zA-Z0-9]/g, '_');
                const date = new Date().toLocaleDateString('fr-FR').replace(/\//g, '-');
                const filename = `Bilan_Tennis_${prenom}_${nom}_${date}.pdf`;
                
                // T√©l√©chargement
                pdf.save(filename);
                
                // Message de succ√®s
                setTimeout(() => {
                    alert('‚úÖ PDF g√©n√©r√© avec succ√®s !');
                }, 500);
                
            } catch (error) {
                console.error('Erreur lors de la g√©n√©ration du PDF:', error);
                alert('‚ùå Erreur lors de la g√©n√©ration du PDF. Veuillez r√©essayer.');
                
                // Restauration en cas d'erreur
                const btn = document.querySelector('.download-btn');
                btn.innerHTML = 'üìÑ T√©l√©charger le PDF';
                btn.disabled = false;
                document.querySelector('.no-print').style.display = 'block';
            }
        }
    </script>
</body>
</html>
